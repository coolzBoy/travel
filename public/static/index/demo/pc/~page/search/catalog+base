fml.define("common/ptpParams",[],function(i,e){"use strict";window.PTP_PARAMS={EnableLogMoGuJs:!1,uuid:"__mgjuuid",uid:"__ud_",platform:function(){var i=navigator.userAgent;return i.indexOf("meilishuo4android")!=-1||i.indexOf("meilishuo android")!=-1?"24":i.indexOf("meilishuo4ios")!=-1||i.indexOf("Meilishuo iPhone")!=-1?"23":/iphone|android|ipad/i.test(i)?"34":"33"},hrefRe:/http[s]?:\/\/\w+\.(meilishuo|mogujie)\.com([\/]|\/.*|)$/,mgjRe:/(meilishuo|mls):\/\//,isNativeRe:/(meilishuo|mls|mogujie)/i,nativeLog:{}}});;fml.define("common/biu",[],function(o,t){"use strict";var n=function(){function o(){t.css("height",$(document).height()+"px")}var t=$(".biu-sidebar"),n=$(".biu-download"),e=$(".mls-qrcode");o(),$(window).resize(function(){o()}),n.hover(function(){e.css("display","block")},function(){e.css("display","none")}),$(window).scroll(function(){document.body.scrollTop?document.body.scrollTop>0?$(".biu-go2top").css("display","block"):$(".biu-go2top").css("display","none"):document.documentElement.scrollTop&&document.documentElement.scrollTop>0?$(".biu-go2top").css("display","block"):$(".biu-go2top").css("display","none")}),$(".biu-go2top").on("click",function(){window.scrollTo(0,0)}),$.ajax({type:"get",url:"http://cart.meilishuo.com/api/cart/getItemCount?marketType=market_meilishuo",dataType:"jsonp",success:function(o){var t=o||{};1001==t.status.code&&t.result&&t.result.count>0&&(t.result.count>99?$(".biu-cart-num").text("99+"):$(".biu-cart-num").text(t.result.count))},error:function(){console.log("--右侧栏 jsonp请求购物车商品数出错")}}),$.ajax({type:"get",url:"http://promotionnew.meilishuo.com/jsonp/getUnUsedCouponNumber/1?domain=11",dataType:"jsonp",success:function(o){var t=o||{};t.success&&t.data.number>0&&(t.data.number>99?$(".biu-coupon-num").text("99+"):$(".biu-coupon-num").text(t.data.number))},error:function(){console.log("--右侧栏 jsonp请求优惠券数出错")}}),$.ajax({type:"get",url:"http://webim.meilishuo.com/jsonp/cinfo/1",dataType:"jsonp",success:function(o){var t=o||{};t.success&&t.data.number>0&&$(".biu-service-num").text(t.data.number)},error:function(o,t){console.log("--右侧栏 jsonp请求客服消息数出错")}}),$(".biu-open-im").on("click",function(){var o=$(".biu-login").text();return""==o||"0"==o||null==o&&void 0!=o||" "==o?(window.open("https://account.meilishuo.com/user/login"),!1):(window._openIm(o,""),!1)})};n.prototype.biuAddCart=function(o){$.ajax({type:"get",url:"http://cart.meilishuo.com/api/cart/getItemCount?marketType=market_meilishuo",dataType:"jsonp",jsonp:"biuCartNum",success:function(t){var n=t||{};if(1001==n.status.code&&n.result&&n.result.count>0){var e=n.result.count+o;e>0&&e<100?$(".biu-cart-num").text(e):$(".biu-cart-num").text("99+")}}})};var e=new n;t.biuAddCart=e.biuAddCart});;fml.define("common/nav",[],function(t,i){"use strict";var a=$(".sec_attr .list");$(".nav_list");a.hover(function(){var t=$(this).children(".nav_list");0!=t.length&&(a.removeClass("active"),$(this).addClass("active"),t.show())},function(){a.removeClass("active"),$(this).removeClass("active"),$(this).children(".nav_list").hide()});var e=a.length;a.each(function(t){t==e-1&&$(this).addClass("last")});var n=$(".attr_box");"welcome"==Meilishuo.config.controller?n.css("display","block"):$(".all , .attr_box").hover(function(){n.stop(!0,!0).slideDown()},function(t){t.stopPropagation(),n.find(".nav_list").hide(),n.stop(!0,!0).slideUp()});var s={"/welcome":"首页","/brand/street":"品牌街","/officialDirect":"官网直邮","/select":"好物"},o="",l=location.pathname;$.each(s,function(t,i){if(0==l.indexOf(t))return o=s[t],!1}),"/"==l&&(o="首页");var c=$(".nav_tab");c.each(function(){var t=$(this).find("a").html();o==t&&$(this).find("a").addClass("active")})});;fml.define("common/search",[],function(t,e){"use strict";function a(t){t=t.list;for(var e="",a=0;a<t.length;a++){var o=t[a];e+='<a target="_blank" href="http://www.meilishuo.com/search/goods/?page=1&searchKey='+encodeURIComponent(o.word)+'" style="color:'+o.color+'">'+o.word+"</a >"}u.html(e)}function o(t){t&&t.list&&t.list.length&&(t=t.list[0],h.attr({placeholder:t.placehold,"data-placeholder":t.placehold,"data-key":t.word}))}function n(){$.ajax({url:"http://mce.meilishuo.com/jsonp/multiget/3?pids=5604,5571",dataType:"jsonp"}).then(function(t){t.success&&(a(t.data[5571]),o(t.data[5604]))})}function i(t){var e=/(?:&|\?)searchKey=([^&]+)/.exec(location.search);e&&e[1]&&h.val(decodeURI(e[1]));var a=/(?:&|\?)filter=([^&]+)/.exec(location.search);a=a&&a[1],"shop"==a&&c(f.find("span")[1])}function c(t){$(t).is("span")&&(f.find("span").removeClass("active"),$(t).addClass("active"),v=$(t).index(),h.attr("placeholder",0==v?h.attr("data-placeholder"):""))}function s(){if(0==v){var t=$.trim($(this).val());if(t){if(w.lastVal==t)return void p.show();w.lastVal=t,w.cache[v]=w.cache[v]||{};var e=w.cache[v];clearTimeout(w.delayId),w.delayId=setTimeout(function(){e[t]?w.render(e[t]):$.ajax({url:w.url,data:{data:'{"keyword":"'+encodeURIComponent(t)+'"}'},dataType:"jsonp"}).then(function(a){e[t]=a,w.render(e[t])})},w.delayTime)}}}function l(t){var e=$(".active",p).removeClass("active");e.length?"up"==t?(e=e.prev(),e.length||(e=p.find(".item").last())):(e=e.next(),e.length||(e=p.find(".item").first())):e=p.find(".item").first(),e.addClass("active"),h.val(e.attr("data-title"))}function r(t){if(t=0==v?$.trim(t)||$.trim(h.attr("data-key")):$.trim(t)){var e=(encodeURIComponent(t),"http://www.meilishuo.com/search/goods/?page=1&searchKey="+encodeURIComponent(t));0!=v&&(e="http://www.meilishuo.com/search/shop/"+encodeURIComponent(t)+"?filter=shop"),location.href=e}}function d(){i(),n(),f.click(function(t){c(t.target)}),g?h.on("input",function(){s.call(this)}):h.on("propertychange",function(){s.call(this)}),h.on("blur",function(){setTimeout(function(){p.hide()},250)}).on("focus",function(){s.call(this)}).on("keyup",function(t){var e=t.keyCode;if(38==e||40==e){var a=38==e?"up":"down";l(a)}else 13==e&&r(this.value)}),p.on("mouseover",function(t){$(".item",this).removeClass("active"),$(t.target).closest(".item").addClass("active")}).on("click",function(t){var e=$(".active",this).attr("data-title"),a=t.target;r("span"==a.tagName.toLowerCase()?e+" "+$(a).text():e)}),m.on("click",function(){r(h.val())})}var h=$(".search-txt"),u=$(".hotword"),f=$(".search-tab"),p=$(".suggest-box"),m=$(".search-btn"),v=0,g="oninput"in document,w={lastVal:null,delayId:null,cache:{},url:"http://search.mogujie.com/jsonp/searchTipsMLS/1",delayTime:500,render:function(t){if(t&&t.success){for(var e=t.data.tips,a="",o=0;o<e.length;o++){for(var n=e[o].props,i="",c=0;c<n.length;c++)i+="<span>"+n[c].title+"</span>";a+='<div class="item" data-title="'+e[o].title+'">'+e[o].title+'<div class="tags">'+i+"</div></div>"}p.html(a).show()}else p.hide()}};d()});;fml.define("common/topbar",[],function(t,a){"use strict";function s(t){var a=$(".cart-goods"),s={marketType:"market_meilishuo",topNum:5};$.ajax({url:"http://cart.meilishuo.com/api/cart/miniCartList",data:s,dataType:"jsonp"}).then(function(s){if("1001"==s.status.code){var e="",o=s.result.cartItems?s.result.cartItems.length:0,r=Math.min(5,o);if(r>0){$(".cart-wrapper .hidden").addClass("down").removeClass("hidden"),t();for(var c=0;c<r;c++){for(var i=s.result.cartItems[c],n="",l=0,d=i.skuAttributes.length;l<d;l++){var p=i.skuAttributes[l];n+="<span>"+p.key+":"+p.value+"</span>&nbsp;&nbsp;"}e+='<li><a href="shopdetail.html#?'+i.itemIdEsc+'" target="_blank" style="padding: 0; float: left;"><span class="cart-goods-img" style="background: url('+i.imgUrl+') no-repeat; background-size: cover;"></span></a><div class="cart-goods-desc"><p><a href="shopdetail.html#?'+i.itemIdEsc+'" target="_blank" style="padding: 0; float: left;"><span class="cart-goods-title">'+i.title+'</span></a><span class="cart-goods-price">￥'+i.nowprice/100+'</span></p><p class="cart-goods-info"><span class="cart-goods-title">'+n+'</span><em class="del-cart-goods" data-stock="'+i.stockIdEsc+'"></em></p></div></li>'}a.html(e)}}})}function e(){$.ajax({url:"http://cart.meilishuo.com/api/cart/getItemCount",data:{marketType:"market_meilishuo"},dataType:"jsonp"}).then(function(t){var a=t.status,s=t.result.count>99?"99+":t.result.count;a.isLogin&&"1001"==a.code&&0!=s&&($(".cart .hidden").addClass(".down").removeClass(".hidden"),$(".my-cart").append('<span class="cart-num">'+s+"</span>"),$(".cart-account .num").text(s))})}function o(){s(e),$("#com-topbar").on("click",".del-cart-goods",function(){var t=$(this).closest("li"),a=$(this).closest(".down"),s=$(this).data("stock");$.ajax({url:"http://cart.meilishuo.com/api/cart/deleteCart",data:{marketType:"market_meilishuo",stockId:s},dataType:"jsonp"}).then(function(s){t.remove();var e=a.find(".cart-goods li").length;e||a.remove()})})}o()});;fml.define("core/etic",[],function(e,n){"use strict";function t(e,n,t){if(t&&checkTemplate(e,n),!r[e]){var c=document.getElementById(e).innerHTML;c=c.replace(/[\r\t\n]/g," ").split("<?").join("\t").replace(/((^|\?>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)\?>/g,"',$1,'").split("\t").join("');").split("?>").join(";p.push('").split("\r").join("\\'");try{r[e]=new Function("","var p=[];p.push('"+c+"');return p.join('');")}catch(e){if(console){console.log(e);var o=c.replace(/^[ ]*\'\)|p.push\(\'[ ]*\'\)|p.push\(\'/g,"").replace(/^[ ]*;|;[ ]*$/g,"");console.log(e.message+"   :   "+o);var l=document.createElement("script");l.innerHTML=o;try{new Function("",o)}catch(e){}}}}var p=r[e];if(!n)return p;try{return p.apply(n)}catch(e){console&&(console.log(e),console.log(n))}}var r={};return t});;fml.define("component/shareTmp",["core/etic"],function(e,t){"use strict";var c=e("core/etic");return function(e,t){t=t||Object;try{var r=c(e,t)}catch(e){fml.debug(e)}return r}});;fml.define("component/waterfall",["component/shareTmp"],function(t,e){"use strict";function i(t){return function(e){return e?e.sort(function(e,i){return t(e,i)||e.left-i.left})[0]:null}}function n(t,e){"string"==typeof e&&(e=e.split(v));try{e&&e.length&&e.forEach(function(e){t=t[e]})}catch(t){U("数据结构错误")}finally{return t}}function o(t,e){var i,n,o=e.helpers,a={};if(t&&t.length){for(i in o)o.hasOwnProperty(i)&&(a[i]=o[i]);n=s,n.call(this,t,e,a),e.onLayoutFinished.call(this,e),e.useOptimise&&(e.hasMoved=!0,this.resetCurTop(),p.triggerHandler(e.touchMoveEventName))}}function a(t){return n(t,this._config._dataName)||[]}function r(t){if(p.height()-g-t<S)return!0}function s(t,e,i){var n,o,a,r,s,c,l,f=this.$el,h=e.tmpl,m=e.colWidth,p=e.useOptimise,d=e.colGapT,g=e.data.frame,x=e.isEqualHeight,y=e._boxHeight,v="",T=null,F=this._cols,L=this._colsHistory,w=L[g],b=this._boxes,H=[],N=0;if(w?F=w.map(function(t){return{min:t.min,max:t.min,left:t.left,frame:g}}):w=F.map(function(t){return{min:t.max,max:t.max,left:t.left,frame:g}}),e.rawData[e.drName]&&(i.r=e.rawData[e.drName]),t.forEach(function(t,n){i.v=t,i.index=n,i.totalIndex=e._totalIndex++,v+=u(h,i)}),f.append(n=_.html(v).children()),o=n.length,!v||!o)return U("没有获取到任何新的 DOM 节点, 请检查模板中是否正确处理了数据");if(n.each(function(t,i){var n,a;i.style.width=m+"px",x?(y||(y=e._boxHeight=i.offsetHeight),n=y):n=i.offsetHeight,T=j(F),j(w),a=T.max+"px",H.push({left:T.left,relativeTopStyle:a,top:T.max,width:m,height:n,index:t,el:i,boxLen:o,frame:g,state:p?e.isFirstFrame?E:G:E}),T.max+=n+d}),e.isFirstFrame=!1,L[g]||(L[g]=F.map(function(t,e){return{min:w[e].max,max:t.max,left:w[e].left,frame:g}})),H.forEach(function(t){var e=t.el;e.style.top=t.relativeTopStyle,e.style.left=t.left+"px",t.baseClass=e.className+=" waterfall-frame-"+g+" "+C,e.className+=" "+t.state}),c=H[0].top,e.isBiWaterfall){if(a=b.length){for(;N<a;){if(l=b[N],l.frame>g){s=N;break}N+=l.boxLen}s="undefined"==typeof s?a:s}else s=0;b.splice.apply(b,[s,0].concat(H))}else!b.length||b[b.length-1].top<=c?this._boxes=b.concat(H):this._boxes=H.concat(b);r=P(F).max,(!this._curTop||r>this._curTop)&&this.$el.height(this._curTop=r),this._cols=F.map(function(t,e){var i=this[e];return{min:t.min<i.min?t.min:i.min,max:t.max>i.max?t.max:i.max,left:t.left,frame:g}},this._cols)}function c(t){return t.checkTimes=1,function e(){setTimeout(function(){t.checkTimes++<B&&(t.initTopOffset=t.$el.offset().top,e())},D*t.checkTimes)}}function l(t){var e,i,n,o=t.colGap,a=4;if(o!==o)return console.error(o+" is not a valid number.");if("number"==typeof o)t.colGapT=t.colGapR=t.colGapB=t.colGapL=o;else{if(e=String(o).split(" "),i=e.length,0==i||i>4)return console.error(o+"'s format is not right.");for(;a--;)if(n=e[a],void 0!==n){if(isNaN(n=+n))return console.error(o+" contains invalid number.");e[a]=n}switch(i){case 1:t.colGapT=t.colGapR=t.colGapB=t.colGapL=e[0];break;case 2:t.colGapT=t.colGapB=e[0],t.colGapR=t.colGapL=e[1];break;case 3:t.colGapT=e[0],t.colGapR=t.colGapL=e[1],t.colGapB=e[2];break;case 4:t.colGapT=e[0],t.colGapR=e[1],t.colGapB=e[2],t.colGapL=e[3]}}}function f(t){this._config=t,this._currentAjax=null,this._id=x++,this._boxes=[],this._frames={loaded:{},cur:0,max:0,min:0},this.init()}var u=t("component/shareTmp"),h=document,m=window,p=$(h),d=$(m),g=d.height(),_=$("<div></div>"),x=1,y=!1,v=".",T="down",F="up",L=!1,w=!0,E="waterfall-optimise-show",G="waterfall-optimise-hide",b=function(){return w},H="waterfall-container",C="waterfall-box",N="NORMAL",k="REVERSE",O="$$AddExtraStyle",R={NORMAL:N,REVERSE:k,SHOW:E,HIDE:G,FORCE_CHECK:"waterfall-force-check",EVENT_CLEAR_BACKUP:"waterfall-clear-backup"},S=g/2,A="scroll.waterfall",D=1e3,B=6,I=0,M={el:".goods-wall",tmpl:"posterWall",type:"get",dataType:"json",data:{offset:0,frame:0,trace:0,limit:10},dataName:"tInfo",layoutDirection:N,colGap:8,hasSideGap:!1,isEqualHeight:!1,canFetch:r,dataHandler:o,dataFilter:a,onBeforeFetch:b,onFetchStart:b,onFetchFinished:b,onFetchSuccess:b,onFetchError:b,onLayoutFinished:b,optimise:null,drName:"r"},j=i(function(t,e){return t.max-e.max}),P=i(function(t,e){return e.max-t.max}),W=i(function(t,e){return e.min-t.min}),V=[],q=0,K=0,U=function(){return m.console?function(t){console.log(t)}:b}();!function(){if(!m[O]){m[O]=!0;var t=h.createElement("style");t.id="waterfall-optimise-style",t.innerHTML="."+E+"{display:block;}."+G+"{display:none;}."+H+"{position:relative;}."+C+"{position:absolute;}",t.appendChild(h.createTextNode("")),h.head.appendChild(t)}}(),f.prototype={constructor:f,init:function(){var t,e,i,n,o,a,r=this._config,s=r.colNum,f=r.hasSideGap,u=0,h=0,m=0;if(n=this.$el=r.$el=$(r.el),!n.length)throw Error("el 参数指定的 DOM 元素不存在!");if(n.addClass(H),this._cols=o=[],this._colsHistory=[],r.initTopOffset=n.offset().top,r.isFirstFrame=!0,c(r)(),l(r),t=r.colGapL,e=r.colGapR,i=e,f&&(h=2*t),!s||s<=0)throw Error("请传入 colNum");for(a=r.colWidth=Math.floor((n.width()-h-(s-1)*i)/s);u<s;u++)0==u?m=f?t:0:m+=a+i,o.push({min:0,max:0,left:m,frame:0});(r.useOptimise=!!r.optimiseFn)&&r.optimiseFn.initRange(s)},fetch:function(t){function e(t,e){a.onFetchFinished.call(o,t,e),o._isLoading=!1}function i(t){var e=o._frames,i=r.frame;a.rawData=t,t=a.dataFilter.call(o,t),a.onFetchSuccess.call(o,t,a),a.dataHandler.call(o,t,a),e.loaded[r.frame]=1,e.max<i&&(e.max=i),e.min>i&&(e.min=i),a.layoutDirection==N?r.frame++:r.frame--,r.trace=t.trace||0}function n(t,e,i){o._isLoading=!1,a.onFetchError.call(o,i,e)}var o=this,a=o._config,r=a.data;if(!o._isLoading)return o._isLoading=!0,a.onBeforeFetch.call(o,a)===L?void(o._isLoading=!1):(o._config.onFetchStart.call(o,a),this.isFrameLoaded(a.data.frame)?void(o._isLoading=!1):t?void setTimeout(function(){e(null,200),i(t)},0):void(this._currentAjax=$.ajax({type:a.type,dataType:a.dataType,data:r,url:a.url,success:i,error:n,complete:e})))},start:function(t){return this.fetch(t),this},lock:function(){return this._isLock=!0,this},isLoading:function(){return this._isLoading},getColsInfo:function(){return $.extend(!0,[],this._cols)},getColsHistoryInfo:function(){return $.extend(!0,[],this._colsHistory)},setColsHistoryInfo:function(t){return this._colsHistory=$.extend(!0,[],t),this},setColsInfo:function(t){return t&&t.length&&(this._cols=$.extend(!0,[],t)),this},getParam:function(t){return this._config[t]},updateParam:function(t,e){return this._config[t]=e,this},getDataByPath:n,updateLayoutDirection:function(t){if(!(t in R))throw Error(t+" is not a valid direction.");return this._config.layoutDirection=t,this},findLowestCol:function(){return W(this._cols)},findHighestCol:function(){return P(this._cols)},isFrameLoaded:function(t){return!!this._frames.loaded[t]},getCurrentFrame:function(){return this._config.data.frame},unlock:function(){return this._isLock=!1,this},destroy:function(){for(var t=q;t--;)V[t]._id===this._id&&(this._currentAjax&&(this._currentAjax.abort(),this._currentAjax=null),V.splice(t,1),q--)},resetCurTop:function(){return this._boxes._curTop=-9999,this},triggerScroll:function(t){return d.triggerHandler(A,[t||T]),this}},d.on(A,function(t,e){var i,n,o;q&&(n=d.scrollTop(),n||y?y=!1:(y=!0,clearTimeout(I),I=setTimeout(function(){o=!0,d.trigger(A)},10)),i=e==T||e!=F&&n>=K,K=n,V.forEach(function(t){t._isLock||t._config.canFetch.call(t,n,i)===w&&(t.fetch(),o&&t.resetCurTop())}))}),e.CONS=R,e.init=function(t){var e,i,n,o,a;if(t=$.extend(!0,{_totalIndex:0},M,t),"string"==typeof t.dataName&&(t._dataName=t.dataName.split(".")),i=t.plugins){if(Array.isArray(i)&&(o=i.some(function(t,e){return t.takeOver&&(a=e,1)})))return n=t.plugins.splice(a,1)[0],n.init(t);if(i.takeOver)return delete t.plugins,i.init(t)}return V.push(e=new f(t)),q++,i&&i.forEach(function(t){t.init(e)}),e}});;fml.define("page/search/catalog",["component/waterfall"],function(i,s){"use strict";function e(i,s,e){i=decodeURIComponent(i);var o=i.indexOf("?"),a=i.indexOf("page"),n=i.indexOf("cpc_offset");if(o>0){if(i.indexOf(e)>0||a||n){var r=i.slice(o+1),c=t(r),l="";c[e]=s,c.page||(c.page=1),c.cpc_offset||(c.cpc_offset=0);for(var h in c){var p;"object"==typeof c[h]?p=JSON.stringify(c[h]):"string"==typeof c[h]?p="page"==h?1:"cpc_offset"==h?0:c[h]:"page"==h?p=1:"cpc_offset"==h&&(p=0),l+=h+"="+p+"&"}return y+"?"+l.substring(0,l.length-1)}return i+"&"+e+"="+s+"&page=1"}return i+"?"+e+"="+s+"&page=1"}function t(i){var s=i.split("&"),e={};return $(s).each(function(i,s){var t=s.split("=");e[t[0]]=t[1]}),e}function o(){c.css({height:"40px"}),u.hide(),l.find(".mulChoice").show().removeClass("ismulChoice"),l.find(".choiceBox").hide(),l.find(".moreDesc").html("更多")}var a=(i("component/waterfall"),$(".userchoice"),$(".userchoice span"),$(".userchoiceWrap")),n=($(".styleTitle"),$(".styleName")),r=$(".styleNameWrap"),c=$(".styleCatalog"),l=$(".styleContainer"),h=$(".choice"),p=($(".styleName span"),$(".mulChoice")),d=$(".more"),f=$(".orderWrap"),m=$(".checkBoxWrap"),u=$(".btnWrap"),g=$(".btnNo"),v=$(".btnSure"),C=$(".filter"),b=$(".filterInfo"),w=$(".sure"),x=$(".userContain"),y=x.data("link");$(".fashion");fml.vars.ppath?fml.vars.ppath=JSON.parse(fml.vars.ppath):fml.vars.ppath={},r.each(function(i){var s=$(this),e=s.siblings(".more");s.height()>40&&e.show()}),h.on("mouseover mouseout",".userchoice",function(i){"mouseover"==i.type?$(this).css({border:"1px solid #FF3168"}):"mouseout"==i.type&&$(this).css({border:"1px solid #DDDDDD"})}),a.on("click",".close",function(){var i=$(this),s=i.data("catepropnameid");delete fml.vars.ppath[s],$(this).parent(".userchoice").remove(),window.location.href=e(window.location.href,JSON.stringify(fml.vars.ppath),"ppath")}),n.on("click",function(){var i=$(this),s=i.parents(".styleNameWrap"),t=i.parents(".styleCatalog"),o=t.find(".btnSure"),a=c.find(".styleTitle"),n=(s.find(".activeChoiceBox"),i.html(),a.html(),s.siblings(".mulChoice").hasClass("ismulChoice")),r=s.siblings(".styleTitle").data("catepropnameid"),l=i.data("catepropid"),h=s.attr("data-choice"),p=i.find(".choiceBox").hasClass("activeChoiceBox");n?(p?(h=h.replace(","+l,""),s.attr("data-choice",h),i.find(".choiceBox").removeClass("activeChoiceBox")):(h+=","+l,i.find(".choiceBox").addClass("activeChoiceBox"),s.attr("data-choice",h)),s.find(".activeChoiceBox").length>0?o.removeClass("btnOn"):0==s.find(".activeChoiceBox").length&&o.addClass("btnOn")):(fml.vars.ppath[r]=l.toString(),window.location.href=e(window.location.href,JSON.stringify(fml.vars.ppath),"ppath"))}),p.on("click",function(){var i=$(this),s=i.parents(".styleCatalog");o(),i.addClass("ismulChoice"),s.find(".choiceBox").show(),s.css("height","auto"),s.find(".moreDesc").html("收起"),i.parents(".styleContainer").siblings(".btnWrap").show(),i.css({display:"none"}),i.siblings(".more").addClass("shouqi")}),g.on("click",function(){var i=$(this),s=i.parents(".styleCatalog"),e=i.parents(".btnWrap").siblings(".styleContainer");e.find(".mulChoice").show().removeClass("ismulChoice"),e.find(".choiceBox").hide(),e.find(".moreDesc").html("更多"),s.css({height:"40px"})}),v.on("click",function(){var i=$(this),s=i.parents(".btnWrap").siblings(".styleContainer").find(".styleNameWrap"),t=s.data("choice"),o=t.substring(1,t.length).split(","),a=i.parents(".btnWrap").siblings(".styleContainer").find(".styleTitle").attr("data-catepropnameid");fml.vars.ppath[a]=o,i.hasClass("btnOn")||(window.location.href=e(window.location.href,JSON.stringify(fml.vars.ppath),"ppath"))}),d.on("click",function(){var i=$(this).hasClass("shouqi");o(),l.find(".moreDesc").html("更多"),0==i?($(this).addClass("shouqi"),$(this).find(".moreDesc").html("收起"),$(this).parents(".styleCatalog").css("height","auto"),$(this).siblings(".mulChoice").show(),$(this).siblings(".styleCatalog").find(".btnWrap").hide()):($(this).removeClass("shouqi"),$(this).find(".moreDesc").html("更多"),$(this).siblings(".styleNameWrap").find(".choiceBox").hide(),$(this).parents(".styleCatalog").css("height","40px"))}),C.on("mouseover mouseout",function(i){var s=$(this),e=s.find(".filterInfoWrap"),t=s.find(".filterName"),o=s.find(".line");"mouseover"==i.type?(s.css({"z-index":"100"}),o.width(s.width()-2+"px"),o.show(),e.show(),t.css({"border-bottom":"1px solid transparent"})):(s.css({"z-index":"0"}),o.hide(),t.css({border:"1px solid #DDDDDD"}),e.hide())}),b.on("click",function(){var i=$(this),s=i.parents(".filterInfoWrap").siblings(".filterName"),t=s.data("catepropnameid"),o=i.data("catepropid");fml.vars.ppath[t]=o.toString(),window.location.href=e(window.location.href,JSON.stringify(fml.vars.ppath),"ppath")}),b.on("mouseover mouseout",function(i){"mouseout"==i.type?$(this).css({color:"#666666"}):"mouseover"==i.type&&$(this).css({color:"#ff3366"})}),f.on("click",".fashion",function(){var i=$(this),s=window.location.href,t=i.data("sort");i.siblings().removeClass("on"),i.addClass("on"),i.siblings().css({border:"1px solid transparent"}),i.hasClass("left")?i.css({"border-left":"1px solid #E1E1E1"}):i.hasClass("right")?i.css({"border-right":"1px solid #E1E1E1"}):i.css({"border-left":"1px solid #E1E1E1","border-right":"1px solid #E1E1E1"}),i.hasClass("price")||(window.location.href=e(s,t,"sort"))}),$(".priceDesc").on("click","li",function(){var i=$(this),s=i.data("sort"),t=window.location.href;i.parents(".price").html(i.html()),window.location.href=e(t,s,"sort")}),w.on("click",function(){var i=$(this),s=i.siblings(".minPrice"),t=i.siblings(".maxPrice"),o=window.location.href,a="",n="";n=s.val()?e(o,s.val(),"minPrice"):e(o,"","minPrice"),a=t.val()?e(n,t.val(),"maxPrice"):e(n,"","maxPrice"),window.location.href=a}),m.on("click",".checkInfo",function(){var i=$(this),s=i.find("span");i.hasClass("isChecked")?(i.removeClass("isChecked"),s.css({"background-position":"0 0"})):(s.css({"background-position":"-14px 0"}),i.addClass("isChecked"))})});;fml.define("base",["common/topbar","common/search","common/nav","common/biu","common/ptpParams"],function(m,o){"use strict";m("common/topbar"),m("common/search"),m("common/nav"),m("common/biu"),m("common/ptpParams")});;